(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{181:function(t,e,s){t.exports=s.p+"assets/img/006-url.cfb71ef1.jpg"},182:function(t,e,s){t.exports=s.p+"assets/img/007-url.759c15fe.png"},497:function(t,e,s){"use strict";s.r(e);var a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#_1-http-0-9-单行协议"}},[t._v("1. HTTP/0.9 - 单行协议")])]),s("li",[s("a",{attrs:{href:"#_2-http-1-0-构建可扩展性"}},[t._v("2. HTTP/1.0 - 构建可扩展性")]),s("ul",[s("li",[s("a",{attrs:{href:"#_2-1-content-type-字段说明"}},[t._v("2.1 Content-Type 字段说明")])])])]),s("li",[s("a",{attrs:{href:"#_3-http-1-1"}},[t._v("3. HTTP/1.1")]),s("ul",[s("li",[s("a",{attrs:{href:"#_3-1-http-1-1-缺点"}},[t._v("3.1 HTTP 1.1 缺点")])])])]),s("li",[s("a",{attrs:{href:"#_4-spdy协议"}},[t._v("4. SPDY协议")])]),s("li",[s("a",{attrs:{href:"#_5-http-2"}},[t._v("5. HTTP/2")]),s("ul",[s("li",[s("a",{attrs:{href:"#_5-1-二进制协议"}},[t._v("5.1 二进制协议")])]),s("li",[s("a",{attrs:{href:"#_5-2-多工"}},[t._v("5.2 多工")])]),s("li",[s("a",{attrs:{href:"#_5-3-数据流"}},[t._v("5.3 数据流")])]),s("li",[s("a",{attrs:{href:"#_5-4-头信息压缩"}},[t._v("5.4 头信息压缩")])]),s("li",[s("a",{attrs:{href:"#_5-5-服务器推送"}},[t._v("5.5 服务器推送")])])])]),s("li",[s("a",{attrs:{href:"#_6-https"}},[t._v("6. HTTPS")])]),s("li",[s("a",{attrs:{href:"#_7-uri、url、urn"}},[t._v("7. URI、URL、URN")]),s("ul",[s("li",[s("a",{attrs:{href:"#_7-1-url格式"}},[t._v("7.1 URL格式")])])])]),s("li",[s("a",{attrs:{href:"#参考资料"}},[t._v("参考资料")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"http发展历史"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http发展历史","aria-hidden":"true"}},[this._v("#")]),this._v(" HTTP发展历史")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("HTTP")]),this._v("（HyperText Transfer Protocol）是万维网（World Wide Web）的基础协议。自 Tim Berners-Lee 博士和他的团队在1989-1991年间创造出的。")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",[s("li",[t._v("HTTP协议始于1989年蒂姆·伯纳斯-李的一篇论文")]),t._v(" "),s("li",[t._v("HTTP/0.9是个简单的文本协议,只能获取文本资源(get获取纯文本)")]),t._v(" "),s("li",[t._v("HTTP/1.0确立了现在使用的大部分技术,但不是正式标准")]),t._v(" "),s("li",[t._v("HTTP/1.1是目前互联网使用最为广泛的协议,功能也非常完善(第一个标准文档).")]),t._v(" "),s("li",[t._v("HTTP/2基于Google的SPDY协议,注重性能改善,但还未普及")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_1-http-0-9-单行协议"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-http-0-9-单行协议","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. HTTP/0.9 - 单行协议")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("0.9版本及其简单，只有一个"),e("code",[this._v("GET")]),this._v("命令。请求由单行指令构成，其后跟目标资源的路径：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-http extra-class"},[e("pre",{pre:!0,attrs:{class:"language-http"}},[e("code",[this._v("GET /index.html\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("上面命令表示，TCP 连接（connection）建立后，客户端向服务器请求（request）网页"),e("code",[this._v("index.html")]),this._v("。")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Hello World"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("1、响应内容不包含HTTP头，只能传送HTML文件，无法传输其他类型的文件。")]),this._v(" "),e("p",[this._v("2、没有状态码或错误代码，一旦出错，只能把错误信息放在HTML文件中传回，供人们查看。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_2-http-1-0-构建可扩展性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-http-1-0-构建可扩展性","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. HTTP/1.0 - 构建可扩展性")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("在请求方法的后面添加了协议版本号："),s("code",[t._v("GET /index.html HTTP/1.0")])]),t._v(" "),s("li",[t._v("新增"),s("code",[t._v("POST")]),t._v("和"),s("code",[t._v("HEAD")]),t._v("命令")]),t._v(" "),s("li",[t._v("增加了缓存字段：Expires强缓存， Last-Modified & If-Modified-Since协商缓存")]),t._v(" "),s("li",[t._v("增加了HTTP状态码，在响应开始时发送，便于浏览器了解请求执行成功或失败，并响应调整行为(更新或使用本地缓存)")]),t._v(" "),s("li",[t._v("引入了HTTP头的概念，无论是对于请求还是响应，允许传输元数据，使协议变得非常灵活，更具扩展新")]),t._v(" "),s("li",[t._v("在新HTTP头的帮助下，任何格式的内容都可以发送。这使得互联网不仅可以传输文字，还能传输图像、视频、二进制文件。这为互联网的大发展奠定了基础("),s("code",[t._v("Content-Type")]),t._v(")")]),t._v(" "),s("li",[t._v("多字符集支持、多部分发送（multi-part type）、权限（authorization）、缓存（cache）、内容编码（content encoding）等")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("每个TCP连接只能发送一个请求，数据发送完毕连接就关闭，如果还要请求其他资源就必须再新建一个连接。TCP连接成本很高，因为需要客户端和服务器三次握手。所以HTTP 1.0版本性能较差。随着网页加载的外部资源越来越多，这个问题就愈发突出。为解决这个问题，有的浏览器在请求时，会加一个非标准的"),e("code",[this._v("Connection")]),this._v("字段：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-http extra-class"},[e("pre",{pre:!0,attrs:{class:"language-http"}},[e("code",[e("span",{attrs:{class:"token header-name keyword"}},[this._v("Connection:")]),this._v(" keep-alive\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-http extra-class"},[e("pre",{pre:!0,attrs:{class:"language-http"}},[e("code",[e("span",{attrs:{class:"token request-line"}},[e("span",{attrs:{class:"token property"}},[this._v("GET")]),this._v(" /index.html HTTP/1.0")]),this._v("\n"),e("span",{attrs:{class:"token header-name keyword"}},[this._v("User-Agent:")]),this._v(" Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_2)\n"),e("span",{attrs:{class:"token header-name keyword"}},[this._v("Accept:")]),this._v(" */*\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("第一行是请求命令，必须在尾部添加协议版本号"),e("code",[this._v("HTTP/1.0")]),this._v("。第二行描述了客户端信息。第三行描述可以接受哪些数据类型。")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("HTTP/1.0 200 OK \nContent-Type: text/plain\nContent-Length: 137582\nExpires: Thu, 05 Dec 1997 16:00:00 GMT\nLast-Modified: Wed, 5 August 1996 15:55:28 GMT\nServer: Apache 0.84\n\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Hello World"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("响应的格式是：头信息 + 一个空行("),e("code",[this._v("\\r\\n")]),this._v(") + 数据")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_2-1-content-type-字段说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-content-type-字段说明","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.1 Content-Type 字段说明")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("浏览器通常使用MIME类型（而不是文件扩展名）来确定如何处理URL，因此Web服务器在响应头中添加正确的MIME类型非常重要。如果配置不正确，浏览器可能会曲解文件内容，网站将无法正常工作，并且下载的文件也会被错误处理。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("关于字符的编码，HTTP/1.0版规定，头信息必须是 ASCII 码，后面的数据可以是任何格式。因此，服务器回应的时候，必须告诉客户端，数据是什么格式，这就是"),e("code",[this._v("Content-Type")]),this._v("字段的作用。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("常见的"),e("code",[this._v("Content-Type")]),this._v("字段的值：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[this._v("text/plain 文本文件默认值。即使它意味着未知的文本文件，但浏览器认为是可以直接展示的。\ntext/html 所有的HTML内容都应该使用这种类型\ntext/css 要被解析为CSS的任何CSS文件必须指定为text/css\nimage/jpeg JPEG 图片\nimage/png PNG 图片\nimage/svg+xml SVG图片 (矢量图)\naudio/mp4 MP4\nvideo/mp4\napplication/javascript\napplication/pdf\napplication/zip\napplication/atom+xml\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("除了预定义的类型，厂商也可以自定义类型："),e("code",[this._v("application/vnd.debian.binary-package")]),this._v("，")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("MIME类型还可以在尾部使用分号，添加参数："),e("code",[this._v("Content-Type: text/html; charset=utf-8")]),this._v("，这句话的意思是发送的是网页，而且编码是UTF-8。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("客户端请求的时候，可以使用"),e("code",[this._v("Accept")]),this._v("字段声明自己可以接受哪些数据格式："),e("code",[this._v("Accept: */*")]),this._v("，这句话的意思是客户端声明自己可以接受任何格式的数据。")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("http-equiv")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Content-Type"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/html; charset=UTF-8"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 等同于 --\x3e")]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("charset")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("utf-8"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v(" \n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_3-http-1-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-http-1-1","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. HTTP/1.1")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("p",[t._v("新增了请求方法："),s("code",[t._v("PUT")]),t._v("、"),s("code",[t._v("PATCH")]),t._v("、"),s("code",[t._v("HEAD")]),t._v("、 "),s("code",[t._v("OPTIONS")]),t._v("、"),s("code",[t._v("DELETE")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("请求头信息中增加了Host字段：能够使不同域名配置在同一个IP地址的服务器上")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("新增两个缓存字段，解决1.0版本缓存缺陷，Cache-Control强缓存，Etag & If-None-Match协商缓存")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("管道机制(pipelining)：客户端可以同时发送多个请求，以降低通信延迟")]),this._v(" "),e("p",[this._v("假如客户端需要发送两个请求。在 1.1 版本以前，在同一个TCP连接里，先发送A请求，服务器响应后，在发送B请求。管道机制则允许浏览器同时发送A请求和B请求，但是服务器还是按照顺序，先响应A请求，完成后在响应B请求。")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("p",[t._v("引入了持久连接(persistent connection):节省了多次打开TCP连接加载网页文档资源的时间")]),t._v(" "),s("p",[t._v("即TCP连接默认不关闭，可以被多个请求复用,不用声明"),s("code",[t._v("Connection: keep-alive")]),t._v("。客户端和服务器发现对方一段时间没有活动，就可以主动关闭连接。不过规范的做法是客户端在最后一个请求时，发送"),s("code",[t._v("Connection: close")]),t._v("，明确要求服务器关闭TCP连接。")]),t._v(" "),s("p",[t._v("目前，对于同一个域名，大多数浏览器允许同时建立6个持久连接。")]),t._v(" "),s("p",[t._v("一个TCP连接现在可以传送多个回应，势必就要有一种机制，区分数据包是属于哪一个回应的。这就是"),s("code",[t._v("Content-length")]),t._v("字段的作用，声明本次回应的数据长度。")]),t._v(" "),s("p",[s("code",[t._v("Content-Length: 3495")]),t._v("：本次回应的长度是3495个字节，后面的字节就属于下一个回应了。")]),t._v(" "),s("p",[t._v("在1.0版中，"),s("code",[t._v("Content-Length")]),t._v("字段不是必需的，因为浏览器发现服务器关闭了TCP连接，就表明收到的数据包已经全了。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-http extra-class"},[e("pre",{pre:!0,attrs:{class:"language-http"}},[e("code",[e("span",{attrs:{class:"token response-status"}},[this._v("HTTP/1.1 "),e("span",{attrs:{class:"token property"}},[this._v("200 OK")])]),this._v("\n"),e("span",{attrs:{class:"token header-name keyword"}},[this._v("Content-Type:")]),this._v(" text/plain\n"),e("span",{attrs:{class:"token header-name keyword"}},[this._v("Transfer-Encoding:")]),this._v(" chunked\n\n25\nThis is the data in the first chunk\n\n1C\nand this is the second one\n\n3\ncon\n\n8\nsequence\n\n0\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_3-1-http-1-1-缺点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-http-1-1-缺点","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.1 HTTP 1.1 缺点")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_4-spdy协议"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-spdy协议","aria-hidden":"true"}},[this._v("#")]),this._v(" 4. SPDY协议")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_5-http-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-http-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 5. HTTP/2")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_5-1-二进制协议"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-二进制协议","aria-hidden":"true"}},[this._v("#")]),this._v(" 5.1 二进制协议")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_5-2-多工"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-多工","aria-hidden":"true"}},[this._v("#")]),this._v(" 5.2 多工")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_5-3-数据流"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-数据流","aria-hidden":"true"}},[this._v("#")]),this._v(" 5.3 数据流")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("数据流发送到一半的时候，客户端和服务器都可以发信号("),e("code",[this._v("RST_STREAM")]),this._v("帧)，取消这个数据流。1.1版本取消数据流的唯一方法，就是关闭TCP连接。HTTP/2 可以取消某一次的请求，同时保证TCP连接还打开着，可以被其他请求使用。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_5-4-头信息压缩"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-头信息压缩","aria-hidden":"true"}},[this._v("#")]),this._v(" 5.4 头信息压缩")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("HTTP 每次请求都必须附上所有信息。所以请求的很多字段都是重复的，比如"),e("code",[this._v("Cookie")]),this._v("和"),e("code",[this._v("User Agent")]),this._v("，一样的内容，每次请求都必须附带，这回浪费很多宽带，也影响速度。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("HTTP/2 引入了头信息压缩机制(header compression)。一方面，头信息使用"),e("code",[this._v("gzip")]),this._v("或"),e("code",[this._v("compress")]),this._v("压缩后再发送；另一方面，客户端和服务器同时维护一张头信息表，所有字段都会存入这个表，生成一个索引号，以后就不发送同样字段了，只发送索引号，这样就提高速度了。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_5-5-服务器推送"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-服务器推送","aria-hidden":"true"}},[this._v("#")]),this._v(" 5.5 服务器推送")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_6-https"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-https","aria-hidden":"true"}},[this._v("#")]),this._v(" 6. HTTPS")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("blockquote",[s("p",[s("strong",[t._v("窃听风险(eavesdropping)")]),t._v("：通信使用明文传输，第三方可以获知通信内容")]),t._v(" "),s("p",[s("strong",[t._v("篡改风险(tampering)")]),t._v("：无法证明报文的完整性，第三方可以修改通信内容")]),t._v(" "),s("p",[s("strong",[t._v("冒充风险(pretending)")]),t._v("：不验证通信方的身份，第三方可以冒充他人身份参与通信")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("blockquote",[s("p",[s("strong",[t._v("窃听风险(eavesdropping)")]),t._v("：所有信息都是"),s("strong",[t._v("加密传播")]),t._v("，第三方无法窃听")]),t._v(" "),s("p",[s("strong",[t._v("篡改风险(tampering)")]),t._v("：具有"),s("strong",[t._v("校验机制")]),t._v("，一旦被篡改，通信双方会立刻发现")]),t._v(" "),s("p",[s("strong",[t._v("冒充风险(pretending)")]),t._v("：配备"),s("strong",[t._v("身份证书")]),t._v("，防止身份被冒充")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_7-uri、url、urn"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-uri、url、urn","aria-hidden":"true"}},[this._v("#")]),this._v(" 7. URI、URL、URN")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("URI：Uniform Resource Identifier，统一资源标识符")]),this._v(" "),e("li",[this._v("URL：Uniform Resource Locator，统一资源定位器")]),this._v(" "),e("li",[this._v("URN：Uniform Resource Name，统一资源名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(181),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("URI统一资源标识符，用来标记一个资源的唯一标识。"),e("strong",[this._v("URI是抽象的定义，不管用什么方法标识，只要能定位一个资源，就叫URI。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("URL：通过描述资源的位置来描述资源")]),this._v(" "),e("li",[this._v("URN：通过名字来识别资源，和位置无关。使用URN可以在不知道网络位置和访问方式情况下访问资源")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_7-1-url格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-url格式","aria-hidden":"true"}},[this._v("#")]),this._v(" 7.1 URL格式")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("http://www.example.com/f2e/js/ajax.html\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("协议：http、https")]),this._v(" "),e("li",[this._v("服务器位置：域名或IP地址")]),this._v(" "),e("li",[this._v("资源路径")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(182),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("协议：指定使用的传输一些，如：http、https、ftp等")]),this._v(" "),e("li",[this._v("登陆信息：可选，指定用户名、密码登陆验证，现在不常见了，都是通过页面登陆方式")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th",[t._v("名字")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("协议")]),t._v(" "),s("td",[t._v("指定使用的传输协议，如：http、https、ftp等")])]),t._v(" "),s("tr",[s("td",[t._v("登陆信息")]),t._v(" "),s("td",[t._v("可选，指定用户名、密码登陆验证，现在不常见了，都是通过页面登陆方式")])]),t._v(" "),s("tr",[s("td",[t._v("服务器地址")]),t._v(" "),s("td",[t._v("可以是域名：www.example.com，也可以是IP： 192.186.3.5")])]),t._v(" "),s("tr",[s("td",[t._v("服务器端口")]),t._v(" "),s("td",[t._v("可选，指定服务器的网络端口，省略则使用默认端口，http：80，https：443")])]),t._v(" "),s("tr",[s("td",[t._v("文件路径")]),t._v(" "),s("td",[t._v("资源的路径，也就是存放位置，不一定和物理路径完全对应，符合web服务器路由约定即可")])]),t._v(" "),s("tr",[s("td",[t._v("参数")]),t._v(" "),s("td",[t._v("资源需要的参数，"),s("code",[t._v("?a=1&b=2&=3")]),t._v("，get方法常用这种形式传参")])]),t._v(" "),s("tr",[s("td",[t._v("片段")]),t._v(" "),s("td",[t._v("用于指定网络资源中的片断。html页面中片段则是描点。很多MVVM框架用作了路由功能")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"参考资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考资料")])}],n=s(0),_=Object(n.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("p"),t._m(0),s("p"),t._v(" "),s("p",[t._v("[TOC]")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("HTTP 是基于 TCP/IP 协议的"),s("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("应用层协议")]),s("OutboundLink")],1),t._v("。它不涉及数据包（packet）传输，主要规定了客户端和服务器之间的通信格式，默认使用80端口。")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("HTTP 的最早版本诞生在 1991 年，最初版本的HTTP协议并没有版本号，后来它的版本号被定位在 0.9 以区分后来的版本。")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),s("p",[t._v("协议规定，服务器只能回应HTML格式的字符串，不能回应别的格式:")]),t._v(" "),t._m(8),s("p",[t._v("服务器发送完毕，就关闭TCP连接。")]),t._v(" "),s("p",[t._v("HTTP 0.9版本缺点：")]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),s("p",[t._v("1996年，HTTP 1.0版本发布，对0.9版本进行了扩展：")]),t._v(" "),t._m(11),t._v(" "),s("p",[t._v("HTTP/1.0缺点：")]),t._v(" "),t._m(12),t._v(" "),t._m(13),s("p",[t._v("这个字段要求服务器不要关闭TCP连接，以便于其他请求复用。服务器同样会响应这个字段，一个可以复用的TCP连接就建立了，直到客户端或服务器主动关闭连接。但是，这不是标准字段，不同实现的行为可能不一致，因此不是根本的解决办法。")]),t._v(" "),s("p",[t._v("HTTP 1.0 请求的例子：")]),t._v(" "),t._m(14),t._m(15),t._v(" "),s("p",[t._v("HTTP/1.0响应的例子：")]),t._v(" "),t._m(16),t._m(17),t._v(" "),s("p",[t._v("第一行是：协议版本 + 状态码 + 状态描述")]),t._v(" "),t._m(18),t._v(" "),s("p",[t._v("Content-Type是用来标识资源的MIME类型。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types",target:"_blank",rel:"noopener noreferrer"}},[t._v("MIME类型"),s("OutboundLink")],1),t._v("："),s("strong",[t._v("媒体类型")]),t._v("（"),s("strong",[t._v("Multipurpose Internet Mail Extensions")]),t._v(" 或 "),s("strong",[t._v("MIME")]),t._v(" 类型 ）是一种标准，用来表示文档、文件或字节流的性质和格式。每个MIME类型值包括一级类型和二级类型，之间用斜杠分隔")]),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),s("p",[t._v("MIME类型还可以在其他的地方使用，如HTML中：")]),t._v(" "),t._m(26),t._m(27),t._v(" "),s("p",[t._v("1997年1月，HTTP 1.1 版本发布，只比 1.0版本晚了半年，1.1 版本进一步完善了 HTTP 协议，直到现在还是最主流的版本。")]),t._v(" "),s("p",[t._v("HTTP 1.1 增加了如下改进：")]),t._v(" "),s("ul",[t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),s("li",[s("p",[t._v("响应分块传输编码：利于传输大文件")]),t._v(" "),s("p",[t._v("使用Content-Length字段的前提条件是服务器在响应前，必须要知道数据的长度。")]),t._v(" "),s("p",[t._v('对于一些耗时的动态操作来说，服务器要等待所有操作完成后，才能发送数据，显然这样的效率不高。更好的处理方法是，产生一块数据就发送一块，采用"流模式"（stream）取代"缓存模式"（buffer）。')]),t._v(" "),s("p",[t._v("因此， 1.1 版本规定可以不使用Content-Length字段，而使用"),s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%88%86%E5%9D%97%E4%BC%A0%E8%BE%93%E7%BC%96%E7%A0%81",target:"_blank",rel:"noopener noreferrer"}},[t._v('"分块传输编码"'),s("OutboundLink")],1),t._v("（chunked transfer encoding）。只要请求或回应的头信息有"),s("code",[t._v("Transfer-Encoding")]),t._v("字段，就表明回应将由数量未定的数据块组成。每个非空的数据块之前，会有一个16进制的数值，表示这个块的长度。最后是一个大小为0的块，就表示本次回应的数据发送完了。下面是一个例子。")]),t._v(" "),t._m(33)])]),t._v(" "),t._m(34),t._v(" "),s("p",[t._v("虽然1.1版允许复用TCP连接，但是同一个TCP连接里面，所有的数据通信是按次序进行的。服务器只有处理完一个回应，才会进行下一个回应。要是前面的回应特别慢，后面就会有许多请求排队等着。这称为"),s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E9%98%9F%E5%A4%B4%E9%98%BB%E5%A1%9E",target:"_blank",rel:"noopener noreferrer"}},[t._v('"队头堵塞"'),s("OutboundLink")],1),t._v("（Head-of-line blocking）。")]),t._v(" "),s("p",[t._v("为了避免这个问题，只有两种方法：一是减少请求数，二是同时多开持久连接。这导致了很多的网页优化技巧，比如合并脚本和样式表、将图片嵌入CSS代码、域名分片（domain sharding）等等。如果HTTP协议设计得更好一些，这些额外的工作是可以避免的。")]),t._v(" "),t._m(35),t._v(" "),s("p",[t._v("2009年，谷歌公开了自行研发的 SPDY 协议，主要解决 HTTP/1.1 效率不高的问题。")]),t._v(" "),s("p",[t._v("这个协议在Chrome浏览器上证明可行以后，就被当作 HTTP/2 的基础，主要特性都在 HTTP/2 之中得到继承。")]),t._v(" "),t._m(36),t._v(" "),s("p",[t._v("2015年，HTTP/2 发布。它不叫 HTTP/2.0，是因为标准委员会不打算再发布子版本了，下一个新版本将是 HTTP/3。")]),t._v(" "),t._m(37),t._v(" "),s("p",[t._v('HTTP/1.1 版的头信息肯定是文本（ASCII编码），数据体可以是文本，也可以是二进制。HTTP/2 则是一个彻底的二进制协议，头信息和数据体都是二进制，并且统称为"帧"（frame）：头信息帧和数据帧。')]),t._v(" "),s("p",[t._v("二进制协议的一个好处是，可以定义额外的帧。HTTP/2 定义了近十种帧，为将来的高级应用打好了基础。如果使用文本实现这种功能，解析数据将会变得非常麻烦，二进制解析则方便得多。")]),t._v(" "),t._m(38),t._v(" "),s("p",[t._v('HTTP/2 复用TCP连接，在一个连接里，客户端和浏览器都可以同时发送多个请求或回应，而且不用按照顺序一一对应，这样就避免了"队头堵塞"。')]),t._v(" "),s("p",[t._v("举例来说，在一个TCP连接里面，服务器同时收到了A请求和B请求，于是先回应A请求，结果发现处理过程非常耗时，于是就发送A请求已经处理好的部分， 接着回应B请求，完成后，再发送A请求剩下的部分。")]),t._v(" "),s("p",[t._v("这样双向的、实时的通信，就叫做多工（Multiplexing）。")]),t._v(" "),t._m(39),t._v(" "),s("p",[t._v("因为 HTTP/2 的数据包不是按顺序发送的，同一个连接里面连续的数据包，可能属于不同的响应。因此，必须要对数据包做标记，指出它属于哪个回应。")]),t._v(" "),s("p",[t._v("HTTP/2 将每个请求或响应的所有数据包，称为一个数据流(stream)。每个数据流都有一个独一无二的编号。数据包发送的时候，都必须标记数据流ID，用来区分它属于哪个数据流。另外还规定，客户端发出的数据流ID一律为奇数，服务器发出的ID为偶数。")]),t._v(" "),t._m(40),t._v(" "),s("p",[t._v("客户端还可以指定数据流的优先级。优先级越高，服务器就会越早响应。")]),t._v(" "),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),s("p",[t._v("HTTP/2 允许服务器未经请求，主动向客户端发送资源，这叫做服务器推送（server push）。")]),t._v(" "),s("p",[t._v("常见场景是客户端请求一个网页，这个网页里面包含很多静态资源。正常情况下，客户端必须收到网页后，解析HTML源码，发现有静态资源，再发出静态资源请求。其实，服务器可以预期到客户端请求网页后，很可能会再请求静态资源，所以就主动把这些静态资源随着网页一起发给客户端了。")]),t._v(" "),t._m(45),t._v(" "),s("p",[t._v("由于HTTP是不加密通信，所有信息明文传输，因此带来了如下风险：")]),t._v(" "),t._m(46),t._v(" "),s("p",[t._v("为了解决HTTP安全性问题，产生了HTTPS，HTTPS解决了上面提到的问题：")]),t._v(" "),t._m(47),t._v(" "),s("p",[t._v("HTTPS（Hypertext Transfer Protocol over Secure Socket Layer），是以安全为目标的HTTP通道，是HTTP的安全版。即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。")]),t._v(" "),s("p",[t._v("SSL/TLS协议的基本思路是采用公钥加密法，也就是说，客户端先向服务器端索要公钥，然后用公钥加密信息，服务器收到密文后，用自己的私钥解密")]),t._v(" "),s("p",[t._v("如果想要建立HTTPS连接，则首先必须从受信任的证书颁发机构（CA）Gworg机构注册 SSL证书。安装SSL证书后，网站地址栏HTTP后面就会多一个“S”，还有绿色安全锁标志。")]),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),s("p",[t._v("URI、URL、URN三者关系：")]),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),s("p",[t._v("URI主要由两个子集构成：")]),t._v(" "),t._m(52),t._v(" "),s("p",[t._v("举个例子：通过身份证(URI)找人，可以使用身份证上的地址(URL)找，也可以通过身份证号+姓名(URN) 找。")]),t._v(" "),t._m(53),t._v(" "),s("p",[t._v("一个URL例子：")]),t._v(" "),t._m(54),s("p",[t._v("我们常见的URL有三部分组成：")]),t._v(" "),t._m(55),t._v(" "),s("p",[t._v("通用的URL由如下几部分组成：")]),t._v(" "),t._m(56),t._v(" "),t._m(57),t._v(" "),t._m(58),t._v(" "),t._m(59),t._v(" "),s("p",[s("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/08/http.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP 协议入门 阮一峰"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSL/TLS协议运行机制的概述 阮一峰"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/Evolution_of_HTTP",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP的发展 MDN"),s("OutboundLink")],1)])])},a,!1,null,null,null);_.options.__file="006-http发展史.md";e.default=_.exports}}]);